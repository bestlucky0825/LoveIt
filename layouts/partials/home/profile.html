<div class="home-profile">
    {{- $avatar := .Site.Params.home.profile.avatarURL -}}
    {{- with .Site.Params.home.profile.gravatarEmail -}}
        {{- $avatar = md5 . | printf "https://www.gravatar.com/avatar/%s?s=240&d=mp" -}}
    {{- end -}}
    {{- with $avatar -}}
        <div class="home-avatar">
            <a href="/posts">
                <img src={{ . | relURL }} alt="avatar" title="{{ T "home" }}">
            </a>
        </div>
    {{- end -}}

    {{- with .Site.Params.home.profile.subtitle -}}
        <h2 class="home-description">
            {{- if $.Site.Params.home.profile.typeit -}}
                {{- $id := md5 . | printf "tp-%s" -}}
                <div id={{ printf "r%s" $id }} hidden=true>
                    {{- . | safeHTML -}}
                </div>
                <div id={{ $id }} class="typeit"></div>
                {{- with $.Scratch.Get "typeitMap" -}}
                    {{- $.Scratch.Set "typeitMap" (dict $id (slice $id) | merge .) -}}
                {{- else -}}
                    {{- $.Scratch.Set "typeitMap" (dict $id (slice $id)) -}}
                {{- end -}}
            {{- else -}}
                {{- . | safeHTML -}}
            {{- end -}}
        </h2>
    {{- end -}}

    <div class="home-social-links">
        {{- if .Site.Params.home.profile.social -}}
            {{- partial "home/social.html" . -}}
        {{- end -}}
    </div>
</div>
