{{ $cdn_url := .Scratch.Get "cdn_url" }}

<div class="intro">
    {{ $avatar := "" }}
    {{ if or .Params.gravatar.Email (and .Site.Params.gravatar.Email (ne .Params.gravatar.Email false)) }}
        {{ $avatar = (printf "https://www.gravatar.com/avatar/%s?s=240&d=mp" (md5 .Site.Params.gravatar.email)) }}
    {{ else if .Site.Params.avatar }}
        {{ $avatar = (printf "%s%s" $cdn_url .) }}
    {{ end }}
    {{ if $avatar }}
        <div class="avatar">
            <a href="/posts/"> <img src={{ $avatar }} alt="avatar"></a>
        </div>
    {{ end }}

    {{ with .Site.Params.subtitle }}
        <h2 class="description">
            <div id="subtitle"></div>
        </h2>
        <script>
            var typeitMap = window.typeitMap || {};
            typeitMap["#subtitle"] = "{{ . }}";
        </script>
    {{ end }}

    <div class="social-links">
        {{ partial "social.html" . }}
    </div>
</div>
